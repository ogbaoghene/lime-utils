// Grid
//
// Define behaviour for grid rows and cells. Uses Flexbox module when supported.
//
// Parameters:
// ```scss
// $alignment : either start, opposite or center. Defaults to start
// $nested    : nested row. Optional
// 
// $width     : cell width in percentages
// $collapsed : no cell gutter. Optional
// $offset    : cell offset in percentages. Optional
// 
// $no-flexbox: disable flexbox module. Optional
// ```
//
// Usage:
// ```scss
// .example {
//   @include row($no-flexbox: true);
// 
//   &.nested {
//     @include row($nested: true, $no-flexbox: true);
//   }
// 
//   .flexbox & {
//     @include row();
// 
//     &.nested {
//       @include row($nested: true);
//     }
//   }
// }
// 
// .example-cell {
//   @include cell(33.333%, $no-flexbox: true);
//  
//   &.collapsed {
//     @include cell(33.333%, $collapsed: true, $no-flexbox: true);
//   }
// 
//   &.offset-20 {
//     @include cell(33.333%, $offset: 20%, $no-flexbox: true);
//   }
//  
//   .flexbox & {
//     @include cell(33.333%);
//    
//     &.collapsed {
//       @include cell(33.333%, $collapsed: true);
//     }
//  
//     &.offset-20 {
//       @include cell(33.333%, $offset: 20%);
//     }
//   }
// }
// ```
//
// **Requires** : _variables, _remFallback
//
// Styleguide 2.11

@mixin row($alignment: start, $nested: null, $no-flexbox: null) {
  @if $no-flexbox != null {
    letter-spacing: -.31em; // YUI3 grid fix for safari
  
    @if $alignment != start {
      @if $alignment == center {
        text-align: center;
      } @else if $alignment == opposite {
        text-align: map-get($direction, end); // as backup
        text-align: end;
      } @else {
        @warn '`#{$alignment}` is not a valid option. Properties omitted.';
      }
    } @else {
      text-align: map-get($direction, start); // as backup
      text-align: start;
    }
  } @else {
    display: flex;
    flex-direction: row;
    flex-wrap: wrap;
    align-items: stretch;
    letter-spacing: normal;
    text-align: inherit;
    
    @if $alignment != start {
      @if $alignment == center {
        justify-content: center;
      } @else if $alignment == opposite {
        justify-content: flex-end;
      } @else {
        @warn '`#{$alignment}` is not a valid option. Properties omitted.';
      }
    } @else {
      justify-content: flex-start;
    }
  }
  
  @if $nested != null {
    margin-right: -$doc-gutter;
    margin-left: -$doc-gutter;
  }
}


@mixin cell($width: auto, $offset: null, $collapsed: null, $no-flexbox: null) {
  letter-spacing: normal;
    
  @if $no-flexbox != null {
    display: inline-block;
    width: $width;
  } @else {
    flex: 0 1 $width;
    
    @if $width != auto { 
      max-width: $width; // IE11 box-sixing fix
    }
  }
  
  @if $offset != null {
    margin-#{map-get($direction, start)}: $offset;
  }
  
  @if $collapsed == null {
    padding-right: $doc-gutter;
    padding-left: $doc-gutter;
  }
}

